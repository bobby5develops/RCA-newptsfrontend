/// <reference path="../../../tsd.d.ts" />

import angular = require("angular");
import mock = require("angular-mocks-shim");
import angularLogger = require("angular-logger-shim");
import lodash = require("lodash");

import {PropertySearch} from "cd-node-utils";
import {moduleName as ParcelsModuleName, MapParcel, ParcelsSearchService} from "../../../shared/Parcels/ParcelsModule";
import {moduleName as EnvironmentModuleName, EnvironmentConfiguration} from "../../../shared/Environment/EnvironmentModule";


'use strict';

describe('Service: ParcelSearchService', () => {
    var log: ng.ILogService;
    var httpBackend: ng.IHttpBackendService;
    var parcelSearchService: ParcelsSearchService;
    var environment: EnvironmentConfiguration;

    // load the service's module
    beforeEach(mock.module(EnvironmentModuleName));
    beforeEach(mock.module(ParcelsModuleName));
    beforeEach(mock.module(angularLogger));

    // instantiate service
    beforeEach(inject(function (_$log_: ng.ILogService,
                                $httpBackend: ng.IHttpBackendService,
                                _ParcelsSearchService_: ParcelsSearchService,
                                _EnvironmentConfiguration_: EnvironmentConfiguration) {
        log = _$log_;
        httpBackend = $httpBackend;
        parcelSearchService = _ParcelsSearchService_;
        environment = _EnvironmentConfiguration_;
        $httpBackend.when('POST', parcelSearchService.serviceURL()).respond(parcelResponse);
    }));

    afterEach(function () {
        httpBackend.verifyNoOutstandingExpectation();
        httpBackend.verifyNoOutstandingRequest();
    });

    it('Should have expected URLs', () => {
        expect(parcelSearchService.serviceURL()).toBe("https://pts.rcanalytics.local/api/v1/elasticsearch/parcel/_search");
    });

    it('Should execute a valid Request and Response', () => {
        var coords1 = {
            latitude: 0,
            longitude: 0
        };
        var coords2 = {
            latitude: 0,
            longitude: 0
        };
        var bounds = {
            northeast: coords1,
            southwest: coords2
        };
        var request = new PropertySearch.Requests.ParcelsSearchServiceRequest(bounds);
        var results = parcelSearchService.SearchParcelsImmediate(request);
        httpBackend.flush();

        results.then(function (parcels: MapParcel[]) {
            var mapParcels: MapParcel[] = parcels;
            expect(lodash.size(mapParcels)).toEqual(9);
            mapParcels.forEach((parcel) => {
                expect(parcel instanceof MapParcel).toBeTruthy();
            });
        }, (error) => {
            fail(error);
        });
    });
});

var parcelResponse = {
    "took": 2,
    "timed_out": false,
    "_shards": {"total": 5, "successful": 5, "failed": 0},
    "hits": {
        "total": 9,
        "max_score": 1.0,
        "hits": [{
            "_index": "parcel",
            "_type": "parcel_data",
            "_id": "p_125broadstreet",
            "_score": 1.0,
            "_source": {
                "address": "125 BROAD STREET",
                "ownername": "125 BROAD CONDOMINIUM",
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [[[-74.009989031600213, 40.702164974598524], [-74.010118243630245, 40.702603508220591], [-74.011203086318332, 40.702426008610786], [-74.011046279113458, 40.701893849950167], [-74.010206488403256, 40.7021047606159], [-74.009989031600213, 40.702164974598524]]]
                }
            }
        }, {
            "_index": "parcel",
            "_type": "parcel_data",
            "_id": "p_ishamstreet",
            "_score": 1.0,
            "_source": {
                "address": "ISHAM STREET",
                "ownername": "PARKS AND RECREATION",
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [[[-73.920225968699924, 40.869127999887205], [-73.920219648335944, 40.869130618898005], [-73.920213392946607, 40.86913332633263], [-73.920207203980212, 40.869136120545221], [-73.92020108505227, 40.869139001538322], [-73.920195035443015, 40.869141966566715], [-73.920189059489118, 40.869145017280225], [-73.920183157919041, 40.869148149287923], [-73.920177333623286, 40.869151364238562], [-73.92017158949696, 40.869154659938438], [-73.920165925542, 40.869158034740749], [-73.920160343925815, 40.869161490293784], [-73.920154847547551, 40.869165021110206], [-73.920149437851379, 40.869168628837826], [-73.920144117009386, 40.869172311282448], [-73.920138886467782, 40.869176068445], [-73.920133747676758, 40.869179897032964], [-73.920128702081271, 40.869183798145144], [-73.920123752577069, 40.8691877690389], [-73.920118899167562, 40.869191806969511], [-73.920114146189363, 40.869195913586857], [-73.920109493646621, 40.869200085597328], [-73.920104942264274, 40.869204321354609], [-73.92010049493561, 40.86920862031171], [-73.920096152385653, 40.869212980822411], [-73.920091916785211, 40.869217401790308], [-73.920087788859959, 40.869221881020188], [-73.920083770780664, 40.869226417415632], [-73.920079863273727, 40.869231008232525], [-73.920076068507868, 40.869235654021274], [-73.92007238576528, 40.8692403503899], [-73.920068818658336, 40.869245100085635], [-73.9200653664705, 40.8692498976185], [-73.920062031371813, 40.869254742441193], [-73.9200588155337, 40.869259632908346], [-73.920055718233613, 40.869264568470534], [-73.920052740922557, 40.8692695452862], [-73.920049885769856, 40.869274563356896], [-73.920047152053755, 40.869279621584162], [-73.920044542672727, 40.869284715029643], [-73.920042056901679, 40.869289845339644], [-73.920039695467082, 40.869295009769985], [-73.920037460540939, 40.869300206126411], [-73.920035350679711, 40.869305432212144], [-73.920033369499, 40.869310688029721], [-73.920031516279778, 40.869315970285086], [-73.920029791023936, 40.86932127733126], [-73.920028193732875, 40.869326608070558], [-73.920026728025533, 40.86933195976065], [-73.920025391010782, 40.869337331301764], [-73.920024186308268, 40.8693427194027], [-73.920023110301017, 40.869348125158915], [-73.920022167332448, 40.869353544730735], [-73.920021355959022, 40.869358975921514], [-73.92002067618202, 40.869364417633356], [-73.920020128003515, 40.86936986821938], [-73.920019713595565, 40.86937532548545], [-73.920019430790788, 40.869380787783115], [-73.92001928103744, 40.869386253466686], [-73.920019262170158, 40.869391719240888], [-73.920019378527726, 40.86939718510888], [-73.920019625774685, 40.869402648322861], [-73.920020006806226, 40.869408106689129], [-73.920020520176834, 40.869413559657694], [-73.920039095858129, 40.869636697634732], [-73.9200394949676, 40.869642158757941], [-73.920039812358766, 40.869647623667049], [-73.92004004875804, 40.869653089617948], [-73.920040206332928, 40.869658558258912], [-73.92004028219273, 40.869664027941084], [-73.920040278507543, 40.869669498117126], [-73.920040191663631, 40.869674967137605], [-73.92004002599981, 40.86968043500562], [-73.920039780069118, 40.869685902269062], [-73.920039452429236, 40.869691365633315], [-73.920039045969389, 40.86969682784504], [-73.92003855707982, 40.86970228396131], [-73.920037988649028, 40.869707737277757], [-73.920037339958554, 40.869713183951376], [-73.920036610283219, 40.869718625628337], [-73.920035801071265, 40.869724060662961], [-73.920034911600254, 40.869729488505719], [-73.920033942593847, 40.869734908608187], [-73.920032892607168, 40.8697403198715], [-73.920031764532681, 40.869745722297672], [-73.920030555479855, 40.869751114237864], [-73.920029268341153, 40.86975649569407], [-73.920027900947233, 40.86976186666481], [-73.92002645402448, 40.869767224405855], [-73.920024929017117, 40.869772570565061], [-73.920023325204653, 40.8697779029461], [-73.920021643310193, 40.869783221549525], [-73.920019881888791, 40.869788525276491], [-73.920018043833664, 40.869793813579975], [-73.920016126975327, 40.869799086458556], [-73.920014132761409, 40.869804342815222], [-73.92001206119383, 40.869809581003324], [-73.920009912271226, 40.86981480212058], [-73.9200076874419, 40.869820004521273], [-73.920005384537063, 40.869825187654925], [-73.920003007896753, 40.869830350426675], [-73.920000552459825, 40.869835492284047], [-73.919998021839831, 40.869840614876352], [-73.919995416765232, 40.869845713812609], [-73.919992736509528, 40.86985079183701], [-73.919989981801123, 40.869855844558479], [-73.919987151913, 40.8698608752702], [-73.919984249017091, 40.869865881777947], [-73.919981271668419, 40.869870862982722], [-73.919978221313343, 40.869875818885625], [-73.919975097953724, 40.869880747839765], [-73.919971902312753, 40.869885649845713], [-73.919968635113534, 40.86989052490393], [-73.919965295634867, 40.869895371367058], [-73.91996188604557, 40.869900189785533], [-73.91995840417745, 40.869904979060038], [-73.919954852201926, 40.869909737545221], [-73.9199512308408, 40.869914466339395], [-73.919947538649751, 40.869919163794819], [-73.919943779245173, 40.869923829365014], [-73.9199399511807, 40.869928463048993], [-73.919936053733892, 40.8699330642973], [-73.919932089799872, 40.869937630916141], [-73.91992805865361, 40.869942164551887], [-73.919923960297012, 40.869946663557634], [-73.919919796177027, 40.869951127385555], [-73.919915566294264, 40.869955555486619], [-73.919911271372584, 40.8699599473124], [-73.919906912135716, 40.869964302314443], [-73.9199024893068, 40.869968620493289], [-73.919898002164047, 40.8699729007505], [-73.919893453601247, 40.869977141990212], [-73.91988884144844, 40.869981344759857], [-73.919884168600035, 40.869985507414647], [-73.9198794350548, 40.8699896310524], [-73.919874639368345, 40.869993714025334], [-73.91986978443397, 40.869997755786436], [-73.919864869528482, 40.870001756335306], [-73.919859898268172, 40.870005715125437], [-73.919854867039476, 40.870009630507504], [-73.919849778733479, 40.870013503581433], [-73.91984463479713, 40.8700173337992], [-73.919839433788212, 40.870021117866209], [-73.9198341771483, 40.870024859626035], [-73.919828867051464, 40.87002855523761], [-73.919823500603812, 40.870032205796775], [-73.919818081421681, 40.870035810757059], [-73.9198126095051, 40.870039370118512], [-73.919807085579833, 40.870042881685869], [-73.919801510367748, 40.870046346557508], [-73.919795883869384, 40.870049764184429], [-73.919790207532458, 40.870053133469817], [-73.919784482803237, 40.870056454414645], [-73.919778708237374, 40.870059725371085], [-73.919772886724829, 40.870062948536876], [-73.919767017545027, 40.870066121715773], [-73.919761102866815, 40.870069245458211], [-73.919755141245915, 40.870072318116385], [-73.919749135575515, 40.870075339143327], [-73.919743085130477, 40.87007831018532], [-73.919736992082875, 40.870081229048232], [-73.919730854986454, 40.870084095730888], [-73.919724677456912, 40.870086910235919], [-73.919718457324819, 40.870089672561754], [-73.91971219820725, 40.870092381612984], [-73.919705898657853, 40.87009503738868], [-73.919699561570567, 40.870097638792977], [-73.919693185497167, 40.870100187471607], [-73.919686772610248, 40.8701026806814], [-73.919680322908036, 40.870105120069212], [-73.91967383784, 40.870107502891308], [-73.91966731812461, 40.870109832990771], [-73.919660764490416, 40.87011210597656], [-73.919654177658558, 40.870114323496004], [-73.919647559075969, 40.870116485001219], [-73.919640908743915, 40.870118589394252], [-73.919634226660577, 40.870120638321936], [-73.919627517890433, 40.870122629592046], [-73.919620776647136, 40.8701245642984], [-73.9196140094403, 40.870126441347679], [-73.919607214100424, 40.870128260738362], [-73.91960039207521, 40.8701300213736], [-73.919593544808222, 40.870131725450044], [-73.919586673748512, 40.870133370773054], [-73.9195797781728, 40.8701349573421], [-73.919572858803747, 40.870136485706595], [-73.919565917812648, 40.870137954221235], [-73.919558956643854, 40.870139364533884], [-73.919551974575526, 40.87014071554605], [-73.919544973053988, 40.870142007258877], [-73.919537952803054, 40.87014323912382], [-73.919530914545888, 40.870144411141439], [-73.919523859728756, 40.870145523312672], [-73.919516789074819, 40.870146575638131], [-73.919509703307256, 40.870147568118206], [-73.919502603150548, 40.870148499655556], [-73.9194954900496, 40.870149371349143], [-73.919488364728963, 0.870150182101469], [-73.919481227187944, 40.870150932461534], [-73.919474079595958, 40.870151622430889], [-73.919387753486845, 40.8701589964399], [-73.9193806066175, 40.870159685306], [-73.919373471962786, 40.870160438955111], [-73.91936634880156, 40.870161255739738], [-73.919359238579375, 40.870162136209935], [-73.9193521434663, 40.870163079818219], [-73.919345063462288, 40.870164086564685], [-73.919337998567983, 40.870165155900267], [-73.919330951673317, 40.870166290022858], [-73.919323922058368, 40.870167486187157], [-73.919316911892579, 40.870168744394825], [-73.919309920452122, 40.870170065194159], [-73.919302952075157, 40.870171449137217], [-73.919296004594187, 40.870172894575639], [-73.919289080178672, 40.870174401510958], [-73.9192821788279, 40.870175970492149], [-73.919275302711881, 40.870177600971722], [-73.919268451830675, 40.870179292949729], [-73.91926162835496, 40.870181045329751], [-73.919254833005937, 40.870182859759218], [-73.919248065063613, 40.8701847334929], [-73.919241327420067, 40.87018666708174], [-73.91923461935059, 40.870188661623104], [-73.9192279437499, 40.870190715472226], [-73.9192212998941, 40.870192829177569], [-73.919214687060659, 40.870195002189682], [-73.91920811175919, 40.870197233415219], [-73.919201570372692, 40.870199523949545], [-73.91919506435, 40.870201871597921], [-73.919188595857889, 40.870204278557651], [-73.919182164177229, 40.870206741534581], [-73.919175771474741, 40.870209262726014], [-73.919169419198681, 40.870211840486114], [-73.919163105902712, 40.8702144748139], [-73.919156834480091, 40.870217165162423], [-73.919150604930863, 40.870219911531805], [-73.919144418700483, 40.870222714471893], [-73.919138276516875, 40.870225570140647], [-73.919132177653481, 40.870228481282332], [-73.919126126450479, 40.870231446801995], [-73.919120120015322, 40.870234466697745], [-73.919114160519385, 40.870237539324222], [-73.919108250132766, 40.870240664134], [-73.919025335593162, 40.870284885604022], [-73.918997092710242, 40.870299737090896], [-73.918914381710835, 40.87034771117127], [-73.918823788790974, 40.870405416180134], [-73.918733413548054, 40.870466532926983], [-73.919210620792271, 40.870884892232823], [-73.92070554507923, 40.869863799115876], [-73.92023060613927, 40.8691261603042], [-73.920225968699924, 40.869127999887205]]]
                }
            }
        }, {
            "_index": "parcel",
            "_type": "parcel_data",
            "_id": "p_peterminuitplaza",
            "_score": 1.0,
            "_source": {
                "address": "PETER MINUIT PLAZA",
                "ownername": "PARKS AND RECREATION",
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [[[-74.012755756358331, 40.701810840558636], [-74.012768745601647, 40.701855472302519], [-74.012809967581632, 40.701997114648648], [-74.012814483092157, 40.702012630855158], [-74.012786313155416, 40.7020173791388], [-74.0128390251676, 40.702185694375466], [-74.012877523083844, 40.702308623183782], [-74.012878603401248, 40.702311254195138], [-74.012879423704661, 40.702312122547177], [-74.012880572925781, 40.702312979883338], [-74.012882668459213, 40.702313559892261], [-74.012885679285844, 40.702313849402472], [-74.012926920205217, 40.702312347782978], [-74.012938697760319, 40.702311918825174], [-74.013146206296838, 40.702303557812009], [-74.0135005567765, 40.702289279146861], [-74.013674910218953, 40.702282354930063], [-74.013691709365631, 40.702280602965139], [-74.0137078865268, 40.70227673657228], [-74.013722985611039, 40.702270864758816], [-74.013736580921957, 40.702263153072025], [-74.01374828916029, 40.70225381893156], [-74.013757780230392, 40.702243125499777], [-74.013764786546773, 40.702231374262027], [-74.013769110578224, 40.702218896526823], [-74.013770630416772, 40.702206044084939], [-74.013769303214517, 40.702193179291328], [-74.01376516639148, 40.702180664848832], [-74.013758336580452, 40.702168853582627], [-74.013749006338529, 40.70215807849268], [-74.013737438718152, 40.702148643365454], [-74.013315773172693, 40.701877764238645], [-74.013294843810854, 40.701862019470255], [-74.013277408487056, 40.701843976810409], [-74.013263896515667, 40.701824080531161], [-74.013254640603819, 40.701802820546618], [-74.013249868659187, 40.701780720349483], [-74.013249698178612, 40.701758324120796], [-74.013254133355261, 40.701736183330347], [-74.013263064975931, 40.70171484315766], [-74.013276273110591, 40.7016948290679], [-74.013465085868432, 40.701556020248191], [-74.0126537365319, 40.701545334158652], [-74.012685144024559, 40.701653250500861], [-74.012704393682014, 40.701650005711471], [-74.012708735818265, 40.701649274026494], [-74.012755756358331, 40.701810840558636]]]
                }
            }
        }, {
            "_index": "parcel",
            "_type": "parcel_data",
            "_id": "p_marginalstreet",
            "_score": 1.0,
            "_source": {
                "address": "MARGINAL STREET",
                "ownername": "",
                "geometry": {
                    "type": "MultiPolygon",
                    "coordinates": [[[[-74.011084417772523, 40.700957164747436, 0, 0], [-74.011064793203815, 40.700908550789855, 0, 0], [-74.011058210863084, 40.700909983088664, 0, 0], [-74.011075055391956, 40.700957814510225, 0, 0], [-74.011084417772523, 40.700957164747436, 0, 0]]], [[[-74.011381912501989, 40.701426179975378, 0, 0], [-74.011227850156459, 40.701044536507908, 0, 0], [-74.011128722513746, 40.701066919820441, 0, 0], [-74.011111633585088, 40.701024586749931, 0, 0], [-74.011104247136146, 40.701026997909764, 0, 0], [-74.01112108842409, 40.701072264068713, 0, 0], [-74.011207505613029, 40.701051757225216, 0, 0], [-74.011287222093728, 40.701254183606189, 0, 0], [-74.011166994522867, 40.701271988555831, 0, 0], [-74.0111368453605, 40.701331925634769, 0, 0], [-74.011191862469715, 40.701466878247082, 0, 0], [-74.011064044882517, 40.701497638559012, 0, 0], [-74.011065876313111, 40.701502175484777, 0, 0], [-74.01135295752141, 40.701432729104752, 0, 0], [-74.011381912501989, 40.701426179975378, 0, 0]]]]
                }
            }
        }, {
            "_index": "parcel",
            "_type": "parcel_data",
            "_id": "p_1waterstreet",
            "_score": 1.0,
            "_source": {
                "address": "1 WATER STREET",
                "ownername": "ONE NY PLAZA CO LLC",
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [[[-74.01131806946114, 40.70181973518288], [-74.011490306498871, 40.702433346698264], [-74.011525245519238, 40.70255782325971], [-74.011597095819852, 40.702813789570527], [-74.011690822119775, 40.702789294037188], [-74.011814928070024, 40.702751861429661], [-74.011918574364316, 40.702718449694], [-74.012116685915231, 40.70264491870239], [-74.01232592976163, 40.702555278795863], [-74.012460597718047, 40.702489883433586], [-74.012557191228041, 40.702438719290747], [-74.0126435525689, 40.702390567747607], [-74.012706773777424, 40.702352729133452], [-74.012672355034312, 40.702164502944548], [-74.012661171709738, 40.702103340916494], [-74.012502106213631, 40.70155677334597], [-74.01131806946114, 40.70181973518288]]]
                }
            }
        }, {
            "_index": "parcel",
            "_type": "parcel_data",
            "_id": "p_1pier6",
            "_score": 1.0,
            "_source": {
                "address": "1 PIER 6",
                "ownername": "NYC DSBS",
                "geometry": {
                    "type": "MultiPolygon",
                    "coordinates": [[[[-74.009924548642, 40.701924752804771, 0, 0], [-74.0098550041714, 40.701793422286023, 0, 0], [-74.009597089041932, 40.701858650929729, 0, 0], [-74.008620489507166, 40.700554007580742, 0, 0], [-74.008352268757889, 40.700667631034079, 0, 0], [-74.008537483248816, 40.700918739390978, 0, 0], [-74.007595905765555, 40.701330506525679, 0, 0], [-74.00775417693184, 40.701544034925128, 0, 0], [-74.008700247528992, 40.701133973938063, 0, 0], [-74.00927835285394, 40.701906082461626, 0, 0], [-74.009310074732468, 40.701947844827544, 0, 0], [-74.00912837760626, 40.702009551807336, 0, 0], [-74.008929335982586, 40.702129042676134, 0, 0], [-74.008707014498981, 40.702263906747248, 0, 0], [-74.008550924000971, 40.70235859199947, 0, 0], [-74.008549690633018, 40.702359339750274, 0, 0], [-74.008641247156191, 40.702441871869034, 0, 0], [-74.009174366009489, 40.702122716483984, 0, 0], [-74.009283716682461, 40.702228370211536, 0, 0], [-74.009370657918765, 40.702175310690556, 0, 0], [-74.009924548642, 40.701924752804771, 0, 0]]], [[[-74.01106587631844, 40.701502175492571, 0, 0], [-74.011064044883867, 40.701497638562955, 0, 0], [-74.01077998447613, 40.701565999207439, 0, 0], [-74.010540774966074, 40.701623974881329, 0, 0], [-74.01106587631844, 40.701502175492571, 0, 0]]]]
                }
            }
        }, {
            "_index": "parcel",
            "_type": "parcel_data",
            "_id": "p_1southstreet",
            "_score": 1.0,
            "_source": {
                "address": "1 SOUTH STREET",
                "ownername": "UNITED STATES AMERICA",
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [[[-74.013575493692613, 40.701050516369186], [-74.013594762279126, 40.701049196607272], [-74.013680336796966, 40.701049186467948], [-74.0137294077801, 40.701049686210922], [-74.01382732610567, 40.701053973341757], [-74.013870914695119, 40.7010589816866], [-74.01393583053725, 40.701066440157533], [-74.013995291751826, 40.701073154874713], [-74.014059575603142, 40.701079864580549], [-74.014120656556045, 40.70108842296883], [-74.014177622620821, 40.701097572505326], [-74.014232349785132, 40.701106752482865], [-74.014291723259717, 40.701117732424024], [-74.014355912695962, 40.701131154026754], [-74.014424211363334, 40.70114764702079], [-74.0144851914548, 40.701162900261359], [-74.014541589511708, 40.701179879408436], [-74.014613229835078, 40.701201866340455], [-74.014696597865452, 40.701227051030159], [-74.014778885325342, 40.701254947626879], [-74.015005349375045, 40.700969033383117], [-74.0149773620602, 40.700955662332461], [-74.014943689209048, 40.700941148543805], [-74.014825618805688, 40.700886065379166], [-74.014815733751249, 40.700894185670016], [-74.014681040471288, 40.70082928756495], [-74.014852285319591, 40.700627289236053], [-74.014844322227674, 40.700620941619235], [-74.0146771194594, 40.700825882359275], [-74.014650550598958, 40.70081366824143], [-74.0146496138737, 40.700814771207682], [-74.01458021829643, 40.700781333946679], [-74.01408578697793, 40.700554027325566], [-74.013957801774907, 40.701006243679032], [-74.013649018584573, 40.700971624196733], [-74.0136534448188, 40.700952112227995], [-74.013597203513257, 40.700944811769681], [-74.013575493692613, 40.701050516369186]]]
                }
            }
        }, {
            "_index": "parcel",
            "_type": "parcel_data",
            "_id": "p_10southstreet",
            "_score": 1.0,
            "_source": {
                "address": "10 SOUTH STREET",
                "ownername": "10 SSA LANDLORD, LLC",
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [[[-74.011111633585088, 40.701024586749931], [-74.011128722513746, 40.701066919820441], [-74.011227850156459, 40.701044536507908], [-74.011381912507716, 40.701426179978604], [-74.012459174751314, 40.70118252642979], [-74.012027514126, 40.700037253898991], [-74.012026615341028, 40.700036939991641], [-74.011991824400539, 40.700031820240866], [-74.011968255089485, 40.700033529938764], [-74.0119600651013, 40.70003502668775], [-74.011940198518474, 40.700038659527344], [-74.011917753780153, 40.700048909164209], [-74.011897554872078, 40.700061725470064], [-74.011879601639777, 40.70007624823625], [-74.0118717473131, 40.700087352724324], [-74.0118638927185, 40.700101019725707], [-74.011861089932353, 40.700109986068234], [-74.011859409818555, 40.70012493643452], [-74.0118605347315, 40.700139455034439], [-74.011871761306423, 40.700165934284357], [-74.011915550937019, 40.700266718125945], [-74.011972806744481, 40.700372629419746], [-74.012017722071, 40.700502456022647], [-74.012059269836286, 40.700620324012661], [-74.012069375469167, 40.700653635081991], [-74.012073815126371, 40.700677924698596], [-74.012071627261591, 40.700692926721736], [-74.011865130047511, 40.700739071243653], [-74.011780929704273, 40.700590457943932], [-74.011771947145732, 40.700576790476553], [-74.011761847636748, 40.700569105065931], [-74.011749500150046, 40.700563128226364], [-74.011737154138387, 40.700561420045673], [-74.011727053523586, 40.700559713830664], [-74.011718076568044, 40.700561421989526], [-74.011705730165147, 40.700565695199835], [-74.01169640526949, 40.700569953829088], [-74.011685531480879, 40.700576799282466], [-74.011678798230648, 40.700585342227072], [-74.01167543256372, 40.7005930295606], [-74.011673189383558, 40.700601570951413], [-74.011675436154192, 40.700613531316407], [-74.011685543608351, 40.700645987699126], [-74.011703509903356, 40.700700651184533], [-74.01172933444505, 40.70076983312984], [-74.011524068010146, 40.7008159571516], [-74.011510487001118, 40.700788649735088], [-74.0114588434401, 40.70069213409068], [-74.011417303117781, 40.70060757746414], [-74.011405515206917, 40.7005879332437], [-74.011397095492171, 40.700579392365491], [-74.011386995450309, 40.700572559446414], [-74.0113757710554, 40.700566583004608], [-74.011362301994, 40.700564874894667], [-74.011349955270916, 40.700563168319349], [-74.011337610571942, 40.700564877329512], [-74.011324143393978, 40.700570003133684], [-74.011312923342743, 40.700576836508958], [-74.0113061910529, 40.700582818015867], [-74.011300579659093, 40.700593066425839], [-74.011297214814292, 40.700601608468382], [-74.011297216370409, 40.700610791357811], [-74.011302832882052, 40.70064773480955], [-74.011316311096181, 40.700707523823269], [-74.011356740209237, 40.700853579823125], [-74.011169319097334, 40.700896303978112], [-74.0111457426276, 40.700844205663515], [-74.0110727681436, 40.700701567762934], [-74.010988563155038, 40.700509391150767], [-74.010940286869655, 40.700408605190511], [-74.010823526699369, 40.700165184009066], [-74.010779760454184, 40.700180562101323], [-74.010894275542654, 40.700422276294617], [-74.01102114265224, 40.700710114429938], [-74.011113205119969, 40.700898017752188], [-74.011064793203815, 40.700908550789855], [-74.011084417767947, 40.7009571647463], [-74.011087401754722, 40.70095695750355], [-74.0111121024055, 40.701024433546756], [-74.011111633585088, 40.701024586749931]]]
                }
            }
        }, {
            "_index": "parcel",
            "_type": "parcel_data",
            "_id": "p_10batterypark",
            "_score": 1.0,
            "_source": {
                "address": "10 BATTERY PARK",
                "ownername": "PARKS AND RECREATION",
                "geometry": {
                    "type": "MultiPolygon",
                    "coordinates": [[[[-74.0145802182435, 40.700781333879107, 0, 0], [-74.014380231105363, 40.700684973899939, 0, 0], [-74.014326353134052, 40.700658500162973, 0, 0], [-74.0145204609698, 40.700417605090394, 0, 0], [-74.014569323747182, 40.7003618026913, 0, 0], [-74.014543878720417, 40.7003424279272, 0, 0], [-74.014469959011265, 40.700425298991696, 0, 0], [-74.014294923078509, 40.700643985405968, 0, 0], [-74.014155744525866, 40.7005765219947, 0, 0], [-74.01428780126875, 40.700147437214632, 0, 0], [-74.014243336534236, 40.700113578902318, 0, 0], [-74.014235329107763, 40.700111855630766, 0, 0], [-74.014095131252844, 40.700546636173215, 0, 0], [-74.014088397409708, 40.700544071739152, 0, 0], [-74.014022227145944, 40.700756766257705, 0, 0], [-74.013951568666073, 40.700990811713361, 0, 0], [-74.013653444936637, 40.700952112203339, 0, 0], [-74.013649018584573, 40.700971624196733, 0, 0], [-74.013957801774907, 40.701006243679032, 0, 0], [-74.01408578697793, 40.700554027325566, 0, 0], [-74.0145802182435, 40.700781333879107, 0, 0]]], [[[-74.014878058395482, 40.700596887604846, 0, 0], [-74.0148517424868, 40.700576849287458, 0, 0], [-74.0146505506141, 40.700813668213144, 0, 0], [-74.0146771194594, 40.700825882359275, 0, 0], [-74.014844322227674, 40.700620941619235, 0, 0], [-74.014852285319591, 40.700627289236053, 0, 0], [-74.014878058395482, 40.700596887604846, 0, 0]]], [[[-74.017672839306087, 40.703921755621167, 0, 0], [-74.017679563519508, 40.703891858059549, 0, 0], [-74.0176840458836, 40.703861960841508, 0, 0], [-74.017688529687192, 40.703832066916732, 0, 0], [-74.017690765095836, 40.70380217114139, 0, 0], [-74.0176918802748, 40.70377227444019, 0, 0], [-74.017691872340592, 40.703742377911489, 0, 0], [-74.017689618678574, 40.703711630850634, 0, 0], [-74.017687366687213, 40.703681735215547, 0, 0], [-74.0176828691983, 40.703651841572075, 0, 0], [-74.017669379387058, 40.703577530775341, 0, 0], [-74.01765597731027, 40.703518437489727, 0, 0], [-74.01765252533113, 40.703503222139162, 0, 0], [-74.017640165471363, 40.703454536291872, 0, 0], [-74.017624441585852, 40.703406707324795, 0, 0], [-74.017606470068458, 40.703358877601232, 0, 0], [-74.017587377861318, 40.703311902216726, 0, 0], [-74.017566040193984, 40.703264926622531, 0, 0], [-74.017542460903172, 40.703218807183561, 0, 0], [-74.017516632056953, 40.703173539508043, 0, 0], [-74.017489685193652, 40.703128273643188, 0, 0], [-74.017460491891029, 40.70308471700347, 0, 0], [-74.017429053146884, 40.70304115959825, 0, 0], [-74.017395372074049, 40.702998456694047, 0, 0], [-74.017360569610574, 40.702956608119848, 0, 0], [-74.017249422296231, 40.702827648306055, 0, 0], [-74.017180939305845, 40.702749077562295, 0, 0], [-74.017042849491588, 40.702592788091771, 0, 0], [-74.017021288759366, 40.702568138347729, 0, 0], [-74.017014783580549, 40.702561187916494, 0, 0], [-74.016962013968339, 40.702495425634439, 0, 0], [-74.016889041173769, 40.7024100214581, 0, 0], [-74.016743097842564, 40.702254585846575, 0, 0], [-74.01670605000443, 40.702212739044064, 0, 0], [-74.016550004785216, 40.70205132600114, 0, 0], [-74.016405187702048, 40.701905287321047, 0, 0], [-74.016359157974819, 40.701858316658345, 0, 0], [-74.016314254904159, 40.701813907232641, 0, 0], [-74.016230061057769, 40.701735335394154, 0, 0], [-74.0160650405088, 40.701579048525076, 0, 0], [-74.016059214771147, 40.701574151577958, 0, 0], [-74.015925511743717, 40.701462277579928, 0, 0], [-74.015746236319785, 40.701313450297796, 0, 0], [-74.0155818607734, 40.7011762914625, 0, 0], [-74.015558870003218, 40.701157945263233, 0, 0], [-74.01544764190848, 40.701072620530262, 0, 0], [-74.015327532243873, 40.700982096089355, 0, 0], [-74.0152837524549, 40.700948790881647, 0, 0], [-74.0151827261671, 40.70087192884494, 0, 0], [-74.015145427284452, 40.700844470727624, 0, 0], [-74.0150772392863, 40.700918068504883, 0, 0], [-74.0150256251626, 40.700978719762041, 0, 0], [-74.015005349375045, 40.700969033383117, 0, 0], [-74.014778885300828, 40.701254947683353, 0, 0], [-74.014948942989164, 40.701317114866377, 0, 0], [-74.014834262175185, 40.701479420631976, 0, 0], [-74.014823221651824, 40.701488220126805, 0, 0], [-74.0148137753732, 40.701494494230808, 0, 0], [-74.014802793403149, 40.701500642821294, 0, 0], [-74.01479097312324, 40.701506117952896, 0, 0], [-74.0147788619526, 40.701510681309422, 0, 0], [-74.01476541262636, 40.701514658554359, 0, 0], [-74.014754952039468, 40.70151703356931, 0, 0], [-74.014746200762076, 40.70151856297641, 0, 0], [-74.014734313227152, 40.701520025263193, 0, 0], [-74.014726166914684, 40.7015206010597, 0, 0], [-74.014716241798467, 40.701520900959615, 0, 0], [-74.014706587787174, 40.701520718843177, 0, 0], [-74.014694416982763, 40.701519840425696, 0, 0], [-74.01468617222227, 40.701518827561493, 0, 0], [-74.0146772435585, 40.701517339390435, 0, 0], [-74.014666205586835, 40.7015149094839, 0, 0], [-74.014659280629729, 40.70151303678891, 0, 0], [-74.01465504194833, 40.701511750582476, 0, 0], [-74.01465198627406, 40.701510755170453, 0, 0], [-74.014646617171962, 40.701508861965387, 0, 0], [-74.0146406702093, 40.701506540101136, 0, 0], [-74.01463387052145, 40.701503575520839, 0, 0], [-74.014625605613219, 40.701499484125492, 0, 0], [-74.014617383858649, 40.701494819067989, 0, 0], [-74.014610524708161, 40.701490404708579, 0, 0], [-74.0146035803088, 40.701485371140343, 0, 0], [-74.014595619243735, 40.701478757264475, 0, 0], [-74.014590226360042, 40.701473647743157, 0, 0], [-74.014586804423857, 40.7014700821771, 0, 0], [-74.014581149386473, 40.701463505336747, 0, 0], [-74.0145761954396, 40.701456836183212, 0, 0], [-74.014572168382969, 40.701450216866824, 0, 0], [-74.014564966623013, 40.701435913156672, 0, 0], [-74.014560003802771, 40.70142162508246, 0, 0], [-74.014558399140071, 40.701406221110425, 0, 0], [-74.01455923175449, 40.701397355411338, 0, 0], [-74.014555844687422, 40.701388286035382, 0, 0], [-74.014547336083865, 40.701381286860183, 0, 0], [-74.014536318938, 40.701375001640351, 0, 0], [-74.014524028916739, 40.701369755199472, 0, 0], [-74.014191310475425, 40.701299476349952, 0, 0], [-74.014173925474481, 40.701298909227695, 0, 0], [-74.014167051741836, 40.701300315943051, 0, 0], [-74.014154695729431, 40.70130339928641, 0, 0], [-74.014145302063511, 40.701306246214514, 0, 0], [-74.014138595144033, 40.701308563620984, 0, 0], [-74.014130163786817, 40.701311834221521, 0, 0], [-74.014121773630009, 40.7013155148844, 0, 0], [-74.014113478051613, 40.7013196132884, 0, 0], [-74.0141069401824, 40.70132319436253, 0, 0], [-74.014101453909277, 40.701326465697882, 0, 0], [-74.014095787390573, 40.701330120773264, 0, 0], [-74.014089303826182, 40.701334690504396, 0, 0], [-74.014076697591008, 40.701344984918912, 0, 0], [-74.0140673939626, 40.701354116794569, 0, 0], [-74.014058645254622, 40.701364383287931, 0, 0], [-74.014052409973715, 40.7013731360098, 0, 0], [-74.01404340934107, 40.701389376241153, 0, 0], [-74.014040201145988, 40.701397040567805, 0, 0], [-74.0140368809748, 40.701407248236748, 0, 0], [-74.014035157120887, 40.701414477582659, 0, 0], [-74.014033681840957, 40.701423760560672, 0, 0], [-74.014033150816758, 40.701429934152806, 0, 0], [-74.014032974627867, 40.701435883728735, 0, 0], [-74.014033235915178, 40.701443566296511, 0, 0], [-74.0140338156576, 40.701449527857235, 0, 0], [-74.01403435730802, 40.701452714464359, 0, 0], [-74.0140851019223, 40.70199216123342, 0, 0], [-74.014097257625721, 40.702095222401368, 0, 0], [-74.014106103304627, 40.702137153101937, 0, 0], [-74.014108769182016, 40.702187566414594, 0, 0], [-74.01409767699576, 40.702226197074864, 0, 0], [-74.014081618927491, 40.7022527354341, 0, 0], [-74.014051671769536, 40.702292225840282, 0, 0], [-74.014033089618934, 40.702324633831736, 0, 0], [-74.014026735998129, 40.702357816152237, 0, 0], [-74.014028884603647, 40.702380885095693, 0, 0], [-74.014041919284637, 40.702414068819245, 0, 0], [-74.014065311192425, 40.702443002379027, 0, 0], [-74.014338802075784, 40.702701208244704, 0, 0], [-74.014377430894257, 40.70274797642432, 0, 0], [-74.014424556212617, 40.702824792668494, 0, 0], [-74.014480345272446, 40.702934065202093, 0, 0], [-74.014527542635321, 40.703029191173634, 0, 0], [-74.01455243723656, 40.703113153692492, 0, 0], [-74.014563266382012, 40.703205181007917, 0, 0], [-74.014565291537792, 40.703269722258945, 0, 0], [-74.014564630087946, 40.70332917834849, 0, 0], [-74.014559349653481, 40.703387140771738, 0, 0], [-74.0145482473884, 40.70346830652791, 0, 0], [-74.01451411986443, 40.703617136392332, 0, 0], [-74.014371498815962, 40.704451352579575, 0, 0], [-74.014372480890344, 40.704459586751305, 0, 0], [-74.014374449011513, 40.704467711558237, 0, 0], [-74.014378302392842, 40.704477697080193, 0, 0], [-74.0143847052447, 40704488875707142, 0, 0], [-74.014393036075589, 40.70449930147813, 0, 0], [-74.014404140427743, 40.704509585820567, 0, 0], [-74.01441241837054, 40.704515583742293, 0, 0], [-74.014424419349083, 40.704522514965831, 0, 0], [-74.014435939527573, 40.704527642937975, 0, 0], [-74.014442270497781, 40.704529930728683, 0, 0], [-74.014450803055027, 40.704532488876453, 0, 0], [-74.01445811998002, 40.704534235823829, 0, 0], [-74.014467383061, 40.704535898536335, 0, 0], [-74.016373978597073, 40.704621235853196, 0, 0], [-74.016379661048617, 40.70460546527336, 0, 0], [-74.016811249325784, 40.70462099221443, 0, 0], [-74.016985031821676, 40.704188020125436, 0, 0], [-74.017521066564825, 40.704317252239861, 0, 0], [-74.017657852584023, 40.703977986079146, 0, 0], [-74.017664990187157, 40.703950796988906, 0, 0], [-74.017672839306087, 40.703921755621167, 0, 0]]]]
                }
            }
        }]
    }
};
